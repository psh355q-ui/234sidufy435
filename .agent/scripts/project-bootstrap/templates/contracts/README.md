# API Contracts (ê³„ì•½)

> BE/FE ê°„ API ê³„ì•½ì„ ì •ì˜í•˜ëŠ” ë””ë ‰í† ë¦¬ì…ë‹ˆë‹¤.
> Contract-First Developmentì˜ í•µì‹¬ íŒŒì¼ë“¤ì´ ìœ„ì¹˜í•©ë‹ˆë‹¤.

---

## ëª©ì 

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Contract-First Development                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  contracts/*.ts (ì´ í´ë”)                                   â”‚
â”‚       â”‚                                                     â”‚
â”‚       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚
â”‚       â”‚                                                     â”‚
â”‚       â–¼                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚  Backend    â”‚                    â”‚  Frontend   â”‚        â”‚
â”‚  â”‚  (Python)   â”‚                    â”‚  (TypeScript)â”‚       â”‚
â”‚  â”‚             â”‚                    â”‚             â”‚        â”‚
â”‚  â”‚  schemas/   â”‚â—„â”€â”€ íƒ€ì… ë™ê¸°í™” â”€â”€â–ºâ”‚  types/     â”‚        â”‚
â”‚  â”‚  tests/api/ â”‚                    â”‚  __tests__/ â”‚        â”‚
â”‚  â”‚             â”‚                    â”‚  mocks/     â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚       â”‚                                   â”‚                 â”‚
â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚
â”‚                       â”‚                                     â”‚
â”‚                       â–¼                                     â”‚
â”‚                  í†µí•© ê²€ì¦                                   â”‚
â”‚                  (E2E í…ŒìŠ¤íŠ¸)                               â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## íŒŒì¼ êµ¬ì¡°

```
contracts/
â”œâ”€â”€ types.ts                    # ê³µí†µ íƒ€ì… ì •ì˜
â”œâ”€â”€ auth.contract.ts            # ì¸ì¦ API ê³„ì•½
â”œâ”€â”€ {feature}.contract.ts       # ê¸°ëŠ¥ë³„ API ê³„ì•½
â””â”€â”€ README.md                   # ì´ íŒŒì¼
```

---

## ì‚¬ìš©ë²•

### 1. ê³„ì•½ ì •ì˜

ìƒˆ ê¸°ëŠ¥ ì¶”ê°€ ì‹œ:

1. `feature.contract.template.ts`ë¥¼ ë³µì‚¬
2. `{feature}.contract.ts`ë¡œ ì´ë¦„ ë³€ê²½
3. í…œí”Œë¦¿ ë³€ìˆ˜ ì¹˜í™˜ ë° ì—”ë“œí¬ì¸íŠ¸ ì •ì˜

### 2. Pydantic ìŠ¤í‚¤ë§ˆ ë™ê¸°í™”

ê³„ì•½ ì •ì˜ í›„ `backend/app/schemas/` ì— ëŒ€ì‘í•˜ëŠ” Pydantic ìŠ¤í‚¤ë§ˆ ìƒì„±:

```python
# backend/app/schemas/{feature}.py
from pydantic import BaseModel

class FeatureCreate(BaseModel):
    title: str
    content: str

class FeatureResponse(BaseModel):
    id: int
    title: str
    content: str
    user_id: int
    created_at: datetime
```

### 3. í…ŒìŠ¤íŠ¸ ì‘ì„± (ğŸ”´ RED)

ê³„ì•½ ê¸°ë°˜ìœ¼ë¡œ í…ŒìŠ¤íŠ¸ ì‘ì„±:

```python
# backend/tests/api/test_{feature}.py
@pytest.mark.asyncio
async def test_create_feature(async_client):
    response = await async_client.post("/features", json={
        "title": "Test",
        "content": "Content"
    })
    assert response.status_code == 201
```

### 4. Mock ìƒì„±

í”„ë¡ íŠ¸ì—”ë“œ ë…ë¦½ ê°œë°œì„ ìœ„í•œ MSW Mock:

```typescript
// frontend/src/mocks/handlers/{feature}.ts
import { http, HttpResponse } from 'msw';

export const featureHandlers = [
  http.get('/api/features', () => {
    return HttpResponse.json({
      data: mockFeatures,
      meta: { page: 1, total: 10, ... }
    });
  }),
];
```

---

## íƒ€ì… ë™ê¸°í™” ì²´í¬ë¦¬ìŠ¤íŠ¸

| TypeScript | Pydantic | ë™ê¸°í™” |
|------------|----------|--------|
| `string` | `str` | âœ“ |
| `number` | `int` / `float` | âœ“ |
| `boolean` | `bool` | âœ“ |
| `string` (ISO 8601) | `datetime` | âœ“ |
| `string` (email) | `EmailStr` | âœ“ |
| `T \| null` | `Optional[T]` | âœ“ |
| `T[]` | `List[T]` | âœ“ |

---

## ì£¼ì˜ì‚¬í•­

1. **ê³„ì•½ ë³€ê²½ ì‹œ ì–‘ìª½ ëª¨ë‘ ì—…ë°ì´íŠ¸**
   - TypeScript ê³„ì•½
   - Pydantic ìŠ¤í‚¤ë§ˆ
   - í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤
   - Mock í•¸ë“¤ëŸ¬

2. **ë„¤ì´ë° ì»¨ë²¤ì…˜**
   - TypeScript: camelCase (`createdAt`)
   - Python: snake_case (`created_at`)
   - API ë³€í™˜ ë ˆì´ì–´ì—ì„œ ì²˜ë¦¬

3. **ì—ëŸ¬ ì½”ë“œ ì¼ê´€ì„±**
   - ê³„ì•½ì— ì •ì˜ëœ ì—ëŸ¬ ì½”ë“œë¥¼ BE/FE ëª¨ë‘ ì‚¬ìš©
   - ìƒˆ ì—ëŸ¬ ì¶”ê°€ ì‹œ ê³„ì•½ ë¨¼ì € ì—…ë°ì´íŠ¸
